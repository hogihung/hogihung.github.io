<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Blog, | Old Guy, New Trick]]></title>
  <link href="http://hogihung.github.io/blog/categories/blog/atom.xml" rel="self"/>
  <link href="http://hogihung.github.io/"/>
  <updated>2014-10-27T17:43:53-04:00</updated>
  <id>http://hogihung.github.io/</id>
  <author>
    <name><![CDATA[Ho Gi Hung]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[MySQL Issue on Mac OSX]]></title>
    <link href="http://hogihung.github.io/blog/2014/10/27/mysql-issue-osx/"/>
    <updated>2014-10-27T18:40:45-04:00</updated>
    <id>http://hogihung.github.io/blog/2014/10/27/mysql-issue-osx</id>
    <content type="html"><![CDATA[<p>Most of my Rails projects, for personal use and education, have been using Postgresql or SQLite for the datbase backend.  At work our primary database is Oracle with a dash of MySQL.  Recently we decided to use MySQL with all future development, and migrate our tools/applications that use Oracle to use MySQL.</p>

<p>I downloaded and installed MySQL by grabbing the installer from the MySQL website:  <a href="http://dev.mysql.com/downloads/mysql/">http://dev.mysql.com/downloads/mysql/</a> and getting the version for my operating system &ndash; OS X Mavericks.</p>

<p>However, with this version installed I was having issues with bundler and getting the mysql gem to compile.  I tried a few solutions that I found on the internet, but none of them were working.</p>

<p>I found some other people who had issues, when using OSX Mavericks, with the MySQL installer.  They solved the issue by removing MySQL that was installed from the download via dev.mysql.com and then re-installing using Homebrew.</p>

<p>This solution worked for me as well.  I found this a bit odd, because earlier in the year I had issues with installing Postgres via Homebrew.  The solution for Postgres was to remove the Homebrew installation and use the installer from the Postgres site.</p>

<p><em>Learn Something New Every Day</em></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Brew A Fix for Imagemagic and Paperclip]]></title>
    <link href="http://hogihung.github.io/blog/2014/10/27/brew-a-fix-for-imagemagick-and-paperclip/"/>
    <updated>2014-10-27T18:05:25-04:00</updated>
    <id>http://hogihung.github.io/blog/2014/10/27/brew-a-fix-for-imagemagick-and-paperclip</id>
    <content type="html"><![CDATA[<p>While working on a Rails project last week I encountered an issue where some of my tests were failing.  It had been a while since I worked on this project so I had to re-familiarize myself with what was going on.</p>

<p>The tests were failing when editing a profile and adding an image.  I popped over to the browser and performed a manual test to get a better idea of what was going on.  That is when I saw the following error: <em>&ldquo;Paperclip::Errors::NotIdentifiedByImageMagickError&rdquo;</em></p>

<p>To attempt to fix the issue, I first performed a simple uninstall and re-install of imagemagic using homebrew:</p>

<p><code>
brew uninstall imagemagick
brew install imagemagick
</code></p>

<p>This didn&rsquo;t solve the problem.  Imagemagic has a command line utility, convert, which one can use to see if the application is working.  I tried a simple test:</p>

<p><code>
convert moonie.jpg moon.png
</code></p>

<p>But I continued to get errors even with that simple test.  So off to the internet for some deep research.  I came across the following steps, which solved the issue I was having.</p>

<p>```
brew update
brew doctor
brew uninstall libtool
brew uninstall imagemagic</p>

<p>cd /Library/Caches/Homebrew
rm imagemag*
rm libtool-2.4.2.tar.gz</p>

<p>brew doctor
brew install libtool &mdash;universal
brew link libool &mdash;force
brew install imagemagic &mdash;build-from-source
```</p>

<p>After completing the above steps, the command line tool, convert was successful.  I re-tested the Rails application, both manually, and via my test suite, and all was green again.</p>

<p>Related resources used during my quest for the fix:
<a href="https://github.com/thoughtbot/paperclip/issues/1205">https://github.com/thoughtbot/paperclip/issues/1205</a>
<a href="http://www.imagemagick.org/script/convert.php">http://www.imagemagick.org/script/convert.php</a>
<a href="http://stackoverflow.com/questions/7412208/imagemagick-and-os-x-lion-trouble">http://stackoverflow.com/questions/7412208/imagemagick-and-os-x-lion-trouble</a></p>

<p><em>Learn Something New Every Day</em></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Reflecting on Rails Inflections]]></title>
    <link href="http://hogihung.github.io/blog/2014/09/16/reflect-on-inflectors/"/>
    <updated>2014-09-16T08:26:35-04:00</updated>
    <id>http://hogihung.github.io/blog/2014/09/16/reflect-on-inflectors</id>
    <content type="html"><![CDATA[<p>Recently I re-discovered an issue I ran into about 8 months ago.  I am re-writing an application I created for work.  The first version was written in Ruby 1.9.x and Rails 3.x.  I built the app using sticks and glue &ndash; no testing.</p>

<p>We are migrating to Ruby 2.1.x and Rails 4.1.x and rather than copy over the app and tweak it, I wanted to take a better approach, a TDD approach.</p>

<p>It is a pretty simple application, with two main models &ndash; Baytech and Device.  A Baytech can have zero to many devices, and a device should only belong to one baytech.</p>

<p>To frameout my two models I used the following:</p>

<p><code>
rails g model baytech
rails g model device
</code></p>

<p>Everything seemed fine at first.  Until I started writing tests and code then I re-discovered a blast from the past.  What I didn&rsquo;t catch was that Rails, with its vast knowledge, pluralized both baytech and device as:</p>

<blockquote><ul>
<li>bayteches</li>
<li>devices</li>
</ul>
</blockquote>

<p>Now, all is cool with the plural version of device as devices.  But the plural of baytech is baytechs.  Oh crap, what do I do?</p>

<p>The first time this happened to me, it took me a while to figure out what the heck was going on.  Eventually all roads led me to the file config/initializers/inflections.rb</p>

<p>Taking a look inside this file, I found the following, or something similar:</p>

<p>```</p>

<h1>Be sure to restart your server when you modify this file.</h1>

<h1>Add new inflection rules using the following format. Inflections</h1>

<h1>are locale specific, and you may define rules for as many different</h1>

<h1>locales as you wish. All of these examples are active by default:</h1>

<h1>ActiveSupport::Inflector.inflections(:en) do |inflect|</h1>

<h1>inflect.plural /^(ox)$/i, &lsquo;\1en&rsquo;</h1>

<h1>inflect.singular /^(ox)en/i, &lsquo;\1&rsquo;</h1>

<h1>inflect.irregular &lsquo;person&rsquo;, &lsquo;people&rsquo;</h1>

<h1>inflect.uncountable %w( fish sheep )</h1>

<h1>end</h1>

<h1>These inflection rules are supported but not enabled by default:</h1>

<h1>ActiveSupport::Inflector.inflections(:en) do |inflect|</h1>

<h1>inflect.acronym &lsquo;RESTful&rsquo;</h1>

<h1>end</h1>

<p>```</p>

<p>To cure my issue, I had to make one small change to this file, making use of inflect.irregular:</p>

<p><code>
ActiveSupport::Inflector.inflections do |inflect|
  inflect.irregular 'baytech', 'baytechs'
end
</code></p>

<p>Once that change was made, anytime there was a need for the plural version of baytech, Rails knew to use baytechs.  Yeah!</p>

<p><em>Learn Something New Every Day</em></p>
]]></content>
  </entry>
  
</feed>
